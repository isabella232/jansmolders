$methodSize: 300px
$mobileMethodSize: 160px

#method
  position: relative
  overflow: hidden
  width: 100%
  background: $bg-color
  padding-top: 100px
  &.show
    .method-scroll-wrapper
      #diagram,
      .method-text
        opacity: 1
      #diagram
        .intro
          animation: slideIntroLabel cubic-bezier(0.770, 0.000, 0.175, 1.000) .3s 1.8s forwards
          +respond-max-width(xs)
            animation: mobileSlideIntroLabel cubic-bezier(0.770, 0.000, 0.175, 1.000) .3s 1.8s forwards
          @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape)
            animation: mobileSlideIntroLabel cubic-bezier(0.770, 0.000, 0.175, 1.000) .3s 1.8s forwards
        .design
          animation: showDesign cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s .5s forwards
          +respond-max-width(xs)
            animation: mobileShowDesign cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s .5s forwards
          @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape)
            animation: mobileShowDesign cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s .5s forwards
        .tuning
          animation: showTuning cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s 1s forwards
          +respond-max-width(xs)
            animation: mobileShowTuning cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s 1s forwards
          @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape)
            animation: mobileShowTuning cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s 1s forwards
        .construction
          animation: showConstruction cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s 1.5s forwards
          +respond-max-width(xs)
            animation: mobileShowConstruction cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s 1.5s forwards
          @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape)
            animation: mobileShowConstruction cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s 1.5s forwards
        .eval
          animation: showEval cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s 2s forwards
          +respond-max-width(xs)
            animation: mobileShowEval cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s 2s forwards
          @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape)
            animation: mobileShowEval cubic-bezier(0.770, 0.000, 0.175, 1.000) 1s 2s forwards
  &.fixed
    position: fixed
    top: 0
    left: 0
    z-index: 8
  .method-scroll-wrapper
    position: relative
    overflow: hidden
    padding: 40px 0
    height: 100%
    &:before
      content: ''
      position: absolute
      width: 80vh
      height: 80vh
      transform: rotate(45deg)
      bottom: -40vh
      right: 60%
      background: rgba(26,27,32,.8)
      z-index: 0
    &:after
      content: ''
      position: absolute
      width: 100vh
      height: 80vh
      transform: rotate(45deg)
      left: -40vh
      bottom: -40vh
      background: rgba(26,27,32,.4)
      z-index: 0
    +respond-max-width(sm)
      &:after,
      &:before
        display: none
    @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape)
      &:after,
      &:before
        display: none
    .method-text
      opacity: 0
      transition: opacity .3s ease
      padding-top: 100px
    #diagram
      width: $methodSize * 2 + $methodSize / 4
      height: $methodSize * 2 + $methodSize
      position: relative
      float: right
      z-index: 3
      opacity: 0
      transition: opacity .3s ease
      +respond-max-width(xs)
        width: $mobileMethodSize * 2 + $mobileMethodSize / 4
        height: $mobileMethodSize * 3
      @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape)
        width: $mobileMethodSize * 2 + $mobileMethodSize / 4
        height: $mobileMethodSize * 3
      +respond-max-width(sm)
        margin-top: 20px
      .intro,
      .design,
      .tuning,
      .construction,
      .eval
        border-radius: 9999px
        height: $methodSize
        width: $methodSize
        border: 0
        color: #fff
        font-size: 1em
        text-transform: uppercase
        background: rgba(26,27,32,1)
        font-weight: 600
        position: absolute
        text-align: center
        padding:  $methodSize / 2.5 $methodSize / 3 0
        opacity: 0
        top: $methodSize / 2
        left: 0
        transition: all .3s ease
        cursor: pointer
        pointer-events: all
        &.focused
          z-index: 9
        +respond-max-width(xs)
          font-size: .75em
          height: $mobileMethodSize
          width: $mobileMethodSize
          padding: $mobileMethodSize / 2.5 $mobileMethodSize / 5 0
          top: $mobileMethodSize / 2
        @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape)
          font-size: .75em
          height: $mobileMethodSize
          width: $mobileMethodSize
          padding: $mobileMethodSize / 2.5 $mobileMethodSize / 5 0
          top: $mobileMethodSize / 2
        .step-content
          span, i
            display: block
          i
            font-size: 2em
            +respond-max-width(xs)
              font-size: 1.5em
            color: #fff
        .fadeIn
          margin-left: -40px
          opacity: 0
          position: absolute
          top: 0
          left: 40px!important
          transition: all .3s ease
          background: $header-text-color
          border-radius: 20px
          padding: 20px
          z-index: 8
          width: $methodSize
          +respond-max-width(xs)
            width: 300px
          height: 300px
          h3,p
            color: #333
          p
            text-transform: none
            font-size: .85em
            text-align: left
          &.show
            opacity: 1
            left: 0

      .construction,
      .eval
        background: $header-text-color
        border: 0
        .step-content
          i
            color: #505058
      .intro
        top: $methodSize / 2
        +respond-max-width(xs)
          padding-left: $mobileMethodSize / 8
          top: $mobileMethodSize / 2
        @media screen and (min-device-width: 768px) and (max-device-width: 1024px) and (orientation: landscape)
          padding-left: $mobileMethodSize / 8
          top: $mobileMethodSize / 2
        left: 0
        opacity: 1
        z-index: 5
        .fadeIn
          background: rgba(26,27,32,1) !important
          h3, p
            color: $header-text-color!important
          left: -80px!important
      .design
        z-index: 4
        .fadeIn
          background: rgba(26,27,32,1) !important
          h3, p
            color: $header-text-color!important
          top: -150px!important
      .tuning
        z-index: 3
        .fadeIn
          background: rgba(26,27,32,1) !important
          h3, p
            color: $header-text-color!important
          left: auto!important
          right: -150px!important
      .construction
        z-index: 6
      .eval
        z-index: 5
      .goo1,
      .goo2
        filter: url('#goo1')
        position: absolute
        top: 0
        left: 0
        bottom: 0
        right: 0
        pointer-events: none
      .goo2
        filter: url('#goo2')



// Desktop animations

@keyframes slideIntroLabel
  100%
    padding-left: $methodSize / 8

@keyframes showDesign
  0%
    transform: scale(.2)
    opacity: 0
  100%
    transform: scale(1)
    top: 0
    left: $methodSize / 2 + $methodSize / 6
    opacity: 1
    padding-top: $methodSize / 6

@keyframes showTuning
  0%
    transform: scale(.2)
    opacity: 0
    top: 0
    left: $methodSize / 2 + $methodSize / 6
  100%
    transform: scale(1)
    left: $methodSize + $methodSize / 3.5
    top: $methodSize / 2
    opacity: 1
    padding-left: $methodSize / 2.5
    padding-right: 0

@keyframes showConstruction
  0%
    transform: scale(.2)
    opacity: 0
    left: $methodSize + $methodSize / 2.5
    top: $methodSize / 2
  100%
    transform: scale(1)
    top: $methodSize / 2
    left: $methodSize - $methodSize / 3
    opacity: 1

@keyframes showEval
  0%
    transform: scale(.2)
    opacity: 0
    top: $methodSize / 2
    left: $methodSize - $methodSize / 3
  100%
    transform: scale(1)
    top: $methodSize + ($methodSize / 2)
    left: $methodSize - $methodSize / 3
    opacity: 1


// Mobile Animations

@keyframes mobileSlideIntroLabel
  100%
    padding-left: 0

@keyframes mobileShowDesign
  0%
    transform: scale(.2)
    opacity: 0
  100%
    transform: scale(1)
    top: 0
    opacity: 1
    left: $mobileMethodSize / 2 + $mobileMethodSize / 6
    padding-top: $mobileMethodSize / 6

@keyframes mobileShowTuning
  0%
    transform: scale(.2)
    opacity: 0
    top: 0
    left: $mobileMethodSize / 2 + $mobileMethodSize / 6
  100%
    transform: scale(1)
    opacity: 1
    padding-right: 0
    left: $mobileMethodSize + $mobileMethodSize / 3.5
    top: $mobileMethodSize / 2
    padding-left: $mobileMethodSize / 2.5

@keyframes mobileShowConstruction
  0%
    transform: scale(.2)
    opacity: 0
    left: $mobileMethodSize + $mobileMethodSize / 2.5
    top: $mobileMethodSize / 2
  100%
    transform: scale(1)
    opacity: 1
    top: $mobileMethodSize / 2
    left: $mobileMethodSize - $mobileMethodSize / 3

@keyframes mobileShowEval
  0%
    transform: scale(.2)
    opacity: 0
    top: $mobileMethodSize / 2
    left: $mobileMethodSize - $mobileMethodSize / 3
  100%
    transform: scale(1)
    opacity: 1
    top: $mobileMethodSize + ($mobileMethodSize / 2)
    left: $mobileMethodSize - $mobileMethodSize / 3
